# 熔断降级设计

![访问统计](https://visitor-badge.glitch.me/badge?page_id=senlypan.qa.13-rate-limit-design&left_color=blue&right_color=red)

> 作者: 潘深练
>
> 创建: 2022-09-24

## 一、前言

熔断降级，是容错设计的方案之一，一般涉及：

- **流量控制**
- **服务熔断**
- **服务降级**

以 Sentinel 而言，基于对熔断降级的基本理解，把熔断降低的 **问题定义** 为：

- **规则配置**
- **异常识别**
- **流量控制**

清晰问题定义之后，再考虑分布式系统的三个特性

- **可靠性**
- **可伸缩性**
- **可维护性**

基本设计上是完备的。

## 二、问题定义

### 2.1、规则配置

规则配置，目的是约束流量波及范围、隔离流量。

- 约束服务维度
- 约束机器维度
- 约束集群维度
- 约束用户组维度
- 约束流量来源维度
- 约束业务上下文维度
- 更多约束维度...

### 2.2、异常识别

异常识别，处于流量 **识别阶段**，识别维度一般有：

- 负载
- 并发线程数
- 响应时间
- QPS
- 异常总数/比例
- 人工干预场景
- 业务上下文
- 更完备的识别维度...

### 2.3、流量控制

流量控制，处于流量 **控制阶段**，控制策略一般有：

- 直接拒绝
- 排队等待
- Warm Up（预热）
- 流量调度
- 控制请求的传递链路
- 更丰富的控制手段...

更多参考 [《阿里云 / 应用高可用服务 AHAS / 流量控制》](https://help.aliyun.com/document_detail/102571.html)


