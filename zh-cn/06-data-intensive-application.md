# 数据密集型应用

> 作者: 潘深练
>
> 创建: 2022-04-19


## 一、数据密集型应用

当今许多新型应用都属于数据密集型（data-intensive），而不是计算密集型（compute-intensive）。对于数据密集型应用，CPU 的处理能力往往不是第一限制性因素，关键在于：

- 数据量
- 数据的复杂度
- 数据的快速多变性

数据密集型应用通常也是基于标准模块构建而成，每个模块负责单一的常用功能。例如，许多应用系统都包含以下模块（或称为数据处理系统，data system）：

- 数据库：用以存储数据，这样之后应用可以再次访问
- 高速缓存：缓存那些复杂或操作代价昂贵的结果，以加快下一次访问
- 索引：用户可以按关键字搜索数据并支持各种过滤
- 流式处理：持续发送消息至另一个进程，处理采用异步方式
- 批处理：定期处理大量的累积数据

## 二、认识数据系统

### 趋势

我们通常将数据库、队列、高速缓存等视为不同类型的系统。虽然数据库和消息队列存在某些相似性，例如两者都会保存数据（至少一段时间），但他们却有着截然不同的访问模式，这就意味着不同的性能特征和设计实现。

- 首先，近年来出现了许多用于数据存储和处理的新工具。它们针对各种不同的应用场景进行优化，不适合再归为传统类型。例如，Redis 既可以用于数据存储也适用于 **消息队列**，Apache Kafka 作为消息队列也具备了持久化存储保证。系统之间的界限正在变得模糊。
- 其次，越来越多的应用系统需求广泛，单个组件往往无法满足所有数据处理与存储需求。因而需要将任务分解，每个组件负责高效完成的一部分，多个组件依靠应用层代码驱动有机衔接起来。

### 问题

设计数据系统或数据服务时，一定会碰到很多棘手的问题。例如：

- 当系统内出现了局部失效时，如何确保数据的正确性与完整性？
- 当发生系统降级（degrade）时，该如何为客户提供一致的良好表现？
- 当负载增加时，系统如何扩展？
- 友好的服务 API 该如何设计？

影响数据系统设计的因素有很多，其中包括相关人员技能和经验水平、遗留系统依赖性、交付周期、对不同风险因素的容忍度、监管合规等。这些因素往往因时因地而异。

一个应用必须完成预期的多种需求，主要包括:
- 功能性需求（即应该做什么，比如各种存储、检索、搜索和处理数据）
- 非功能性需求（即常规性、例如安全性、可靠性、合规性、可伸缩性、兼容性和可维护性）。其中极为重要的 [三个问题](/zh-cn/06-architecture-target?id=二、分布式是架构设计挑战)：
    - 可靠性
    - 扩展性（可伸缩性）
    - 可维护性